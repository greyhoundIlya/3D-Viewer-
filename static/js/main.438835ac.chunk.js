(this["webpackJsonp3d-product-configurator"]=this["webpackJsonp3d-product-configurator"]||[]).push([[0],{12:function(e,t,a){e.exports={nodeSelector:"NodeSelector_nodeSelector__2aKE4",optionText:"NodeSelector_optionText__p6g6W",optionsContainer:"NodeSelector_optionsContainer__1szZ3",option:"NodeSelector_option__35ivk",circleDot:"NodeSelector_circleDot__37pEx",checkMark:"NodeSelector_checkMark__1HWsk",checked:"NodeSelector_checked__1g_4G",statusDot:"NodeSelector_statusDot__1aWh5",arrowIcon:"NodeSelector_arrowIcon__3Uv5F",open:"NodeSelector_open__2hvOW",toggleButton:"NodeSelector_toggleButton__1beDz",woodSubmenu:"NodeSelector_woodSubmenu__22hQz",slideDown:"NodeSelector_slideDown__29Uy0",woodOption:"NodeSelector_woodOption__3kDu_",selected:"NodeSelector_selected__22_Ea"}},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(10),c=a.n(r),i=a(19),s=a(13),l=a(96),d=a(79),u=a(176),p=a(80);var m=a.n(p)()({palette:{primary:{main:"#b9151b"}}}),h=a(22),b=a(68),v=a(84),j=a(86),f=a(9);const w="GET_PROCUT_LIST",g="GET_CURRENT_PRODUCT_DATA",S="SET_CURRENT_PRODUCT_DATA",O="SET_CURRENT_NODE_DATA",x="SET_SELECTED_MESH_DATA",M="SET_CURRENT_MATERIAL_DATA",D="SELECTED_MESH_MATERIAL",_="CURRENT_DRACO_VERSION",y={currentMaterialData:null,selectedMeshMaterial:null};var N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(f.a)(Object(f.a)({},e),{},{currentMaterialData:t.payload});case D:return Object(f.a)(Object(f.a)({},e),{},{selectedMeshMaterial:t.payload});default:return Object(f.a)({},e)}};const C={selectedMeshData:[]};var E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;return t.type===x?Object(f.a)(Object(f.a)({},e),{},{selectedMeshData:[...t.payload]}):Object(f.a)({},e)};const T={currentNodeData:null};var P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return t.type===O?Object(f.a)(Object(f.a)({},e),{},{currentNodeData:t.payload}):Object(f.a)({},e)};const k={productDataList:[],currentProductData:null,productData:null,currentDracoVersion:"model"};var L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(f.a)(Object(f.a)({},e),{},{productData:t.payload});case w:return Object(f.a)(Object(f.a)({},e),{},{productDataList:[...t.payload]});case S:return Object(f.a)(Object(f.a)({},e),{},{currentProductData:t.payload});case _:return Object(f.a)(Object(f.a)({},e),{},{currentDracoVersion:t.payload});default:return Object(f.a)({},e)}};var R=Object(h.combineReducers)({productStore:L,nodeStore:P,meshStore:E,materialStore:N}),z=a(85);const I={key:"root",storage:a.n(z).a,whitelist:["root"]},A=Object(b.a)(I,R),F=Object(h.createStore)(A,Object(v.composeWithDevTools)(Object(h.applyMiddleware)(j.a))),G=Object(b.b)(F);var W=a(63),B=a(175),V=a(64),U=a(5),q=a(172),H=a(174),X=a(178),K=a(179),Y=a(170);function J(e){return t=>{t({type:D,payload:e})}}var Z=a(3);const Q=Object(Y.a)((e=>({root:{marginLeft:"30px",display:"flex","& > *":{margin:e.spacing(.5)},[e.breakpoints.down("sm")]:{marginLeft:"-20px"}}}))),$=Object(Y.a)((e=>({root:{width:45,height:45,border:"2px solid"}})));var ee=Object(i.b)((e=>({materialStore:e.materialStore,meshStore:e.meshStore,nodeStore:e.nodeStore,productStore:e.productStore,setCurrentMaterialData:U.PropTypes.func.isRequired,setSelectedMeshMaterial:U.PropTypes.func.isRequired})),{setCurrentMaterialData:function(e){return t=>{e?fetch(e).then((e=>e.json())).then((e=>{t({type:M,payload:e})})):t({type:M,payload:null})}},setSelectedMeshMaterial:J})((e=>{var t;const a=Q(),o=$(),{materialStore:r,meshStore:c,nodeStore:i,productStore:s,setCurrentMaterialData:l,setSelectedMeshMaterial:d}=e;return Object(n.useEffect)((()=>{l(null)}),[i.currentNodeData]),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(q.a,{item:!0,className:a.root,children:i.currentNodeData?Object(Z.jsx)(H.a,{variant:"h6",style:{fontSize:"1rem",color:"white"},children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"}):Object(Z.jsx)(Z.Fragment,{})}),Object(Z.jsx)(q.a,{item:!0,className:a.root,children:null===(t=i.currentNodeData)||void 0===t?void 0:t.candidateMaterials.map((t=>Object(Z.jsx)(X.a,{size:"small",style:{padding:4},color:r.selectedMeshMaterial===t.name?"primary":"default",onClick:()=>{r.selectedMeshMaterial!==t.name&&(d(t.name),l(t.path),e.onMaterialSelect&&e.onMaterialSelect(t))},children:Object(Z.jsx)(K.a,{alt:t.name,title:t.name,src:t.thumbnail,classes:o})},t.name)))})]})})),te=a(180),ae=a(181),ne=a(177);function oe(e){return t=>{t({type:x,payload:e})}}const re=Object(Y.a)((e=>({formControl:{margin:e.spacing(1),minWidth:120}})));var ce=Object(i.b)((e=>({meshStore:e.meshStore,nodeStore:e.nodeStore,productStore:e.productStore,setSelectedMeshData:U.PropTypes.func.isRequired})),{setSelectedMeshData:oe})((e=>{var t;const a=re(),{meshStore:o,nodeStore:r,productStore:c,setSelectedMeshData:i}=e;let s=null===(t=r.currentNodeData)||void 0===t?void 0:t.candidateMeshes.map((e=>Object(Z.jsx)("option",{value:e.id,children:e.label},e.id)));const[l,d]=Object(n.useState)("");return Object(n.useEffect)((()=>{r.currentNodeData&&o.selectedMeshData&&o.selectedMeshData.forEach((e=>{e.nodeId===r.currentNodeData.id&&d(e.meshId)}))}),[r.currentNodeData,o.selectedMeshData]),r.currentNodeData&&Object(Z.jsxs)(te.a,{fullWidth:!0,className:a.formControl,children:[Object(Z.jsx)(ae.a,{shrink:!0,variant:"outlined",id:"mesh-selector",children:"Select a mesh"}),Object(Z.jsx)(ne.a,{labelId:"mesh-selector",native:!0,labelWidth:50,label:"Select node",variant:"outlined",style:{width:300},value:l,onChange:e=>{if(r.currentNodeData&&o.selectedMeshData){const t=[];o.selectedMeshData.forEach((a=>{a.nodeId===r.currentNodeData.id&&(a.meshId=e.target.value),t.push(a)})),i(t)}},children:s})]})}));function ie(e){return t=>{t({type:O,payload:e})}}var se=a(12),le=a.n(se);var de=Object(i.b)((e=>({nodeStore:e.nodeStore,productStore:e.productStore})),{setCurrentNodeData:ie})((e=>{var t;const{nodeStore:a,productStore:o,setCurrentNodeData:r,onNodeReselect:c,getMaterialThumbnailByNode:i,onNodeVisibilityChange:s}=e,l=(null===(t=o.productData)||void 0===t?void 0:t.nodes)||[],d=l.filter((e=>"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u0430\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0430"!==e.label)),[u,p]=Object(n.useState)(!0),[m,h]=Object(n.useState)([]),[b,v]=Object(n.useState)(!1),[j,f]=Object(n.useState)([!0,!0]);Object(n.useEffect)((()=>{d.length>0&&h(Array(d.length).fill(!0))}),[d.length]);const w=e=>{if(o.productData)if("none"!==e){var t;const i=o.productData.nodes.find((t=>t.id===e));if((null===(t=a.currentNodeData)||void 0===t?void 0:t.id)===e?c&&c(e):r(i),window.moveCameraToView){var n;const t=null===i||void 0===i||null===(n=i.label)||void 0===n?void 0:n.toLowerCase();let a="isometric";null!==t&&void 0!==t&&t.includes("\u0444\u0430\u0441\u0430\u0434")||null!==t&&void 0!==t&&t.includes("front")?a="facade":null!==t&&void 0!==t&&t.includes("\u043a\u0440\u044b\u0448\u0430")||null!==t&&void 0!==t&&t.includes("roof")||null!==t&&void 0!==t&&t.includes("\u043a\u0440\u0438\u0448\u0430")?a="roof":null!==t&&void 0!==t&&t.includes("\u0431\u043e\u043a")||null!==t&&void 0!==t&&t.includes("side")?a="side":null!==t&&void 0!==t&&t.includes("\u0441\u0442\u043e\u043f\u0447\u0438\u043a")||null!==t&&void 0!==t&&t.includes("column")?a="front":null!==t&&void 0!==t&&t.includes("\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u0432\u0441\u0442\u0430\u0432\u043a\u0438")||null!==t&&void 0!==t&&t.includes("Panel")||null!==t&&void 0!==t&&t.includes("\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u0430\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0430")?a="wood_insert":(null!==t&&void 0!==t&&t.includes("\u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f")||null!==t&&void 0!==t&&t.includes("metal"))&&(a="Metal-constuctor");let o=null;if(window.g_model_root){const t=window.g_model_root.children.find((t=>t.name===e));t&&(o=t)}window.moveCameraToView(a,o)}}else a.currentNodeData?r(null):c&&c(null);else r(null)},g=e=>{e.stopPropagation(),v((e=>!e))};return Object(Z.jsxs)("div",{className:le.a.nodeSelector,children:[Object(Z.jsx)("div",{className:le.a.header}),Object(Z.jsxs)("div",{className:le.a.optionsContainer,children:[Object(Z.jsxs)("div",{className:"".concat(le.a.option),children:[Object(Z.jsx)("div",{className:le.a.circleDot+(u?" "+le.a.checked:""),onClick:e=>{if(e.stopPropagation(),p((e=>!e)),s){const e=!u;d.forEach(((t,a)=>{s(t.id,e)}))}},children:u&&Object(Z.jsx)("svg",{className:le.a.checkMark,viewBox:"0 0 24 24",children:Object(Z.jsx)("path",{d:"M 11.94,20.25 8.7,13.64 C 7.5836008,11.362408 8.7449524,11.954942 9.234963,12.670011 12.802978,17.461386 11.781076,19.309624 14.75,13.24 L 20.707,1.0616 C 21.19746,0.0424868 21.563475,1.05578 21.049,2.27 l -6.488,17.07 c -0.381549,1.003861 -1.786,2.05 -2.621,0.9 l -10e-4,0.005 10e-4,0.005 z",fill:"currentColor"})})}),Object(Z.jsx)("div",{className:le.a.optionText,onClick:e=>{e.stopPropagation(),w("none"),window.moveCameraToView&&window.moveCameraToView("isometric")},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u043f\u0443\u043d\u043a\u0442\u044b"})]}),d.map(((e,t)=>{var a;return Object(Z.jsxs)("div",{className:"".concat(le.a.option),children:[Object(Z.jsx)("div",{className:le.a.circleDot+(m[t]?" "+le.a.checked:""),onClick:e=>((e,t)=>{t.stopPropagation();const a=d[e],n=!m[e];h((t=>{const a=[...t];return a[e]=n,a})),s&&s(a.id,n)})(t,e),children:m[t]&&Object(Z.jsx)("svg",{className:le.a.checkMark,viewBox:"0 0 24 24",children:Object(Z.jsx)("path",{d:"M 11.94,20.25 8.7,13.64 C 7.5836008,11.362408 8.7449524,11.954942 9.234963,12.670011 12.802978,17.461386 11.781076,19.309624 14.75,13.24 L 20.707,1.0616 C 21.19746,0.0424868 21.563475,1.05578 21.049,2.27 l -6.488,17.07 c -0.381549,1.003861 -1.786,2.05 -2.621,0.9 l -10e-4,0.005 10e-4,0.005 z",fill:"currentColor"})})}),Object(Z.jsx)("div",{className:le.a.statusDot,style:{background:"none",padding:0},onClick:t=>{t.stopPropagation(),w(e.id)},children:Object(Z.jsx)("img",{src:i?i(e):null===(a=e.candidateMaterials[0])||void 0===a?void 0:a.thumbnail,alt:"material",style:{width:35,height:20,borderRadius:6,objectFit:"cover",border:"1px solid #888"}})}),Object(Z.jsxs)("div",{className:le.a.optionText,onClick:t=>{t.stopPropagation(),w(e.id)},children:[e.label,"\u041a\u0440\u0438\u0448\u0430"===e.label&&Object(Z.jsx)("svg",{className:"".concat(le.a.arrowIcon," ").concat(b?le.a.open:""),viewBox:"0 0 16 8",width:"24",height:"12",style:{marginLeft:"30px",display:"inline-block"},children:Object(Z.jsx)("path",{d:"M9.547 7.268L16 0 8 4 0 0l6.453 7.268A1.996 1.996 0 0 0 8 8c.623 0 1.18-.285 1.547-.732z",fill:"currentColor"})})]}),"\u041a\u0440\u0438\u0448\u0430"===e.label&&Object(Z.jsx)("div",{className:le.a.toggleButton,onClick:g,children:Object(Z.jsx)("svg",{viewBox:"0 0 16 16",width:"8",height:"8",children:Object(Z.jsx)("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]},e.id)})),b&&Object(Z.jsx)("div",{className:le.a.woodSubmenu,children:l.filter((e=>"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u0430\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0430"===e.label)).map(((e,t)=>{var a;return Object(Z.jsxs)("div",{className:le.a.woodOption,children:[Object(Z.jsx)("div",{className:le.a.circleDot+(j[t]?" "+le.a.checked:""),onClick:e=>((e,t)=>{if(t.stopPropagation(),f((t=>{const a=[...t];return a[e]=!a[e],a})),s){const t=l.filter((e=>"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u0430\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0430"===e.label));t[e]&&s(t[e].id,!j[e])}})(t,e),children:j[t]&&Object(Z.jsx)("svg",{className:le.a.checkMark,viewBox:"0 0 24 24",children:Object(Z.jsx)("path",{d:"M 11.94,20.25 8.7,13.64 C 7.5836008,11.362408 8.7449524,11.954942 9.234963,12.670011 12.802978,17.461386 11.781076,19.309624 14.75,13.24 L 20.707,1.0616 C 21.19746,0.0424868 21.563475,1.05578 21.049,2.27 l -6.488,17.07 c -0.381549,1.003861 -1.786,2.05 -2.621,0.9 l -10e-4,0.005 10e-4,0.005 z",fill:"currentColor"})})}),Object(Z.jsxs)("div",{className:le.a.optionText,onClick:t=>{t.stopPropagation(),w(e.id),window.moveCameraToView&&window.moveCameraToView("wood_insert")},children:["\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 ",t+1]}),Object(Z.jsx)("div",{className:le.a.statusDot,style:{background:"none",padding:0},onClick:t=>{t.stopPropagation(),w(e.id)},children:Object(Z.jsx)("img",{src:i?i(e):null===(a=e.candidateMaterials[0])||void 0===a?void 0:a.thumbnail,alt:"material",style:{width:35,height:20,borderRadius:6,objectFit:"cover",border:"1px solid #888"}})})]},e.id)}))})]})]})}));const ue=Object(Y.a)((e=>({formControl:{margin:e.spacing(1),minWidth:120}})));var pe=Object(i.b)((e=>({productStore:e.productStore,getCurrentProductData:U.PropTypes.func.isRequired,getProductDataList:U.PropTypes.func.isRequired,setCurrentProductData:U.PropTypes.func.isRequired,setCurrentNodeData:U.PropTypes.func.isRequired})),{getCurrentProductData:function(e){return t=>{e?fetch(e).then((e=>e.json())).then((e=>{t({type:g,payload:e})})):t({type:g,payload:null})}},getProductDataList:function(){return e=>{fetch("/products/products.json").then((e=>e.json())).then((t=>{e({type:w,payload:t}),t.length>0&&e({type:S,payload:t[0]})}))}},setCurrentProductData:function(e){return t=>{t({type:S,payload:e})}},setCurrentNodeData:ie})((e=>{var t,a;const o=ue(),{productStore:r,getCurrentProductData:c,getProductDataList:i,setCurrentProductData:s,setCurrentNodeData:l}=e,d=r.productDataList.map((e=>Object(Z.jsx)("option",{value:e.id,children:e.label},e.id)));return Object(n.useEffect)((()=>{r.currentProductData?c(r.currentProductData.path):c(null),l(null)}),[r.currentProductData]),Object(n.useEffect)((()=>{i()}),[]),Object(Z.jsxs)(te.a,{fullWidth:!0,className:o.formControl,children:[Object(Z.jsx)(ae.a,{shrink:!0,variant:"outlined",id:"product-selector",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c"}),Object(Z.jsxs)(ne.a,{labelId:"product-selector",native:!0,labelWidth:50,label:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c",variant:"outlined",style:{width:300},value:null!==(t=null===(a=r.currentProductData)||void 0===a?void 0:a.id)&&void 0!==t?t:"",onChange:e=>{s(r.productDataList.find((t=>t.id===e.target.value)))},children:[Object(Z.jsx)("option",{value:"",children:"None"}),d," "]})]})})),me=a(88),he=a.n(me),be=a(0),ve=a(11),je=a(92),fe=a(90),we=a(91),ge=a(97),Se=a(53),Oe=a(56),xe=a.n(Oe);var Me=()=>Object(Z.jsx)("div",{className:xe.a.loader,children:Object(Z.jsx)("svg",{className:xe.a.spinner,viewBox:"0 0 50 50",children:Object(Z.jsx)("circle",{className:xe.a.path,cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})})}),De=a(89),_e=a.n(De),ye=a.p+"static/media/shader.d622c730.frag",Ne=a.p+"static/media/shader.00bfe510.vert";class Ce extends be.Nb{constructor(){super({type:"CopyMaterial",uniforms:{inputBuffer:new be.ac(null),opacity:new be.ac(1)},fragmentShader:ye,vertexShader:Ne,blending:be.ob,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}}var Ee=function(e,t,a,n,o){const r=new ve.f(e,{frameBufferType:be.D}),c=new ve.m(t,a);r.addPass(c);const i=new ve.t({eskil:!1,offset:.01,darkness:1}),s=new ve.c({contrast:.1}),l=new ve.h({gamma:1.2}),d=new ve.n(n,o,ve.p.HIGH,ve.e.COLOR);d.edgeDetectionMaterial.setEdgeDetectionThreshold(.05),d.edgeDetectionMaterial.setPredicationMode(ve.l.DEPTH),d.edgeDetectionMaterial.setPredicationThreshold(.002),d.edgeDetectionMaterial.setPredicationScale(1);const u=new ve.s({blendFunction:ve.a.SKIP,texture:d.renderTargetEdges.texture}),p=new ve.s({blendFunction:ve.a.SKIP,texture:d.renderTargetWeights.texture}),m=new ve.b({blendFunction:ve.a.SCREEN,kernelSize:ve.j.MEDIUM,luminanceThreshold:.3,luminanceSmoothing:.83,height:1024,intensity:.5,resolutionScale:.5}),h=new ve.i({hue:0,saturation:.191}),b=new ve.k(t,a),v=new ve.d({normalBuffer:b.texture,resolutionScale:.5}),j=e.capabilities.isWebGL2?v.texture:null,f=new ve.q(a,b.texture,{blendFunction:ve.a.MULTIPLY,distanceScaling:!0,depthAwareUpsampling:!0,normalDepthBuffer:j,samples:9,rings:7,distanceThreshold:.02,distanceFalloff:.0025,rangeThreshold:3e-4,rangeFalloff:1e-4,luminanceInfluence:.7,minRadiusScale:.33,radius:.1,intensity:1.33,bias:.025,fade:.01,color:null,resolutionScale:1}),w=new ve.r(new Ce),g=new ve.g(a,m,d,u,p,f,i,s,l,h);return r.addPass(b),e.capabilities.isWebGL2?r.addPass(v):console.log("WebGL 2 not supported, falling back to naive depth downsampling"),w.enabled=!1,w.renderToScreen=!0,g.renderToScreen=!0,r.addPass(w),r.addPass(g),r};const Te=10;var Pe=function(){const e=new be.C;e.name="LightGroup";const t=new be.E("#2b09c4ff","#b81919ff",1.5);e.add(t);const a=new be.t(16777215,1.5);a.position.set(.5,Te,1),a.target.position.set(0,0,0),a.castShadow=!0,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,a.shadow.camera.near=.01,a.shadow.camera.far=20,e.add(a);const n=new be.Tb(13827264,1);return n.position.set(-10,Te,-10),n.target.position.set(0,0,0),n.penumbra=.1,n.decay=2,n.distance=20,e.add(n),e};function ke(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e||!t)return;let o=new be.fc(0,0,0);if("wood_insert"===a){if(window.g_model_root){const e=new be.f;e.setFromObject(window.g_model_root),e.getCenter(o)}}else if(n){const e=new be.f;e.setFromObject(n),e.getCenter(o)}const r={isometric:{x:0,y:7,z:10},facade:{x:0,y:0,z:15},roof:{x:0,y:8,z:20},side:{x:0,y:0,z:50},wood_insert:{x:10,y:5,z:10},"Metal-constuctor":{x:0,y:-10,z:10}},c={isometric:{x:0,y:5,z:40},facade:{x:0,y:0,z:30},roof:{x:0,y:12,z:35},side:{x:30,y:15,z:8},wood_insert:{x:8,y:5,z:30},"Metal-constuctor":{x:0,y:-10,z:30}},i=window.innerWidth<=768,s=i?c:r,l=s[a];if(!l)return void console.warn("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f \u0432\u0438\u0434\u0430: ".concat(a));const d=2e3,u=e.position.clone(),p=new be.fc(o.x+l.x,o.y+l.y,o.z+l.z),m=Date.now();function h(){const a=Date.now()-m,n=Math.min(a/d,1),r=n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2;e.position.lerpVectors(u,p,r),t.target.copy(o),t.update(),n<1&&requestAnimationFrame(h)}h()}let Le,Re,ze,Ie,Ae,Fe,Ge,We,Be,Ve,Ue=!1;var qe=Object(i.b)(((e,t)=>({isNight:t.isNight,materialStore:e.materialStore,meshStore:e.meshStore,nodeStore:e.nodeStore,productStore:e.productStore})),{setSelectedMeshData:oe,setSelectedMeshMaterial:J,setCurrentNodeData:ie})((function(e){const{materialStore:t,meshStore:a,nodeStore:o,productStore:r,setSelectedMeshData:c,setSelectedMeshMaterial:i,setCurrentNodeData:s,isNight:l}=e,d=Object(n.useRef)(null),[u,p]=Object(n.useState)(!0),[m,h]=Object(n.useState)("#C4C4C4");function b(e,t){Le&&(Le.traverse((a=>{"Object3D"===a.type&&a.name===e&&(a.visible=t,a.children.forEach((e=>{e.visible=t})))})),Fe())}function v(e,t){if(e&&t){if(e.material.name=t.name,""===t.color?e.material.color.set(null):e.material.color.set(t.color),""===t.map)e.material.map=null;else{const a=Be.load(t.map);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.map=a}if(""===t.normalMap)e.material.normalMap=null;else{const a=Be.load(t.normalMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.normalMap=a,e.material.normalScale=new be.ec(t.normalScale.x,t.normalScale.y)}if(""===t.bumpMap)e.material.bumpMap=null;else{const a=Be.load(t.bumpMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.bumpMap=a,e.material.bumpScale=t.bumpScale}if(""===t.displacementMap)e.material.displacementMap=null;else{const a=Be.load(t.displacementMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.displacementMap=a,e.material.displacementScale=t.displacementScale,e.material.displacementBias=t.displacementBias}if(""===t.roughnessMap)e.material.roughnessMap=null;else{const a=Be.load(t.roughnessMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.roughnessMap=a}if(e.material.roughness=t.roughness,""!==t.metalnessMap)e.material.metalnessMap=null;else{const a=Be.load(t.metalnessMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.metalnessMap=a}if(e.material.metalness=t.metalness,""===t.alphaMap)e.material.alphaMap=null;else{const a=Be.load(t.alphaMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.alphaMap=a}if(e.material.opacity=t.opacity,""===t.aoMap)e.material.aoMap=null;else{const a=Be.load(t.aoMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.aoMap=a,e.material.aoMapIntensity=t.aoMapIntensity}if(""===t.emissiveMap)e.material.emissiveMap=null;else{const a=Be.load(t.emissiveMap);t.uvScale&&(a.repeat.set(t.uvScale.u,t.uvScale.v),a.wrapS=a.wrapT=be.jb),e.material.emissiveMap=a,e.material.emissiveIntensity=t.emissiveIntensity}e.material.emissive.set(t.emissive),e.material.envMapIntensity=t.envMapIntensity,e.material.wireframe=t.wireframe,e.material.transparent=t.transparent,e.material.needsUpdate=!0,e.children.forEach((t=>{t.material=e.material}))}}return Object(n.useEffect)((()=>(window.setNodeVisibility=b,()=>{delete window.setNodeVisibility})),[]),Object(n.useEffect)((()=>{let e=d.current.offsetWidth,t=d.current.offsetHeight,a=!1,n=null,o=null;const r=new be.l;let c=null;Le=new be.rb,Le.name="ModelRoot";const i=new be.Jb,s=[],l=new be.Mb;Re=l,l.background=new be.m("#755c48"),l.add(Le);const m=Pe();l.add(m);const h=function(){const e=new be.vb(Te,Te);e.rotateX(-Math.PI/2);const t=new be.Ob;t.opacity=.3;const a=new be.db(e,t);return a.name="GroundMesh",a.position.y=0,a.receiveShadow=!0,a}();l.add(h);const b=new be.ub(30,e/t,.01,1e3);function v(){a=!1,function(){const a=f.domElement.offsetWidth,n=f.domElement.offsetHeight;(a!==e||n!==t)&&(e=a,t=n,b.aspect=e/t,b.updateProjectionMatrix(),f.setSize(e,t),c.setSize(e,t),j())}(),w.update(),f.render(l,b),c&&c.render(r.getDelta()),w.autoRotate&&j()}function j(){a||(a=!0,requestAnimationFrame(v))}b.position.set(-0,Te,Te),b.lookAt(0,0,0),ze=b,Fe=j;const f=new be.kc({powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1});f.setSize(e,t,!1),f.setPixelRatio(window.devicePixelRatio||1),f.shadowMap.enabled=!0,f.shadowMap.type=be.tb,Ae=f,d.current.appendChild(f.domElement),f.domElement.addEventListener("mousedown",(function(e){})),f.domElement.addEventListener("mouseup",(function(a){const n=new be.ec(a.offsetX/e*2-1,-a.offsetY/t*2+1);i.setFromCamera(n,b),i.intersectObjects(s).length})),f.domElement.addEventListener("mousemove",(function(a){const n=new be.ec(a.offsetX/e*2-1,-a.offsetY/t*2+1);i.setFromCamera(n,b),i.intersectObjects(s).length>0?document.body.style.cursor="pointer":document.body.style.cursor="default"})),f.domElement.addEventListener("touchstart",(function(e){})),f.domElement.addEventListener("touchend",(function(a){const n=new be.ec(a.changedTouches[0].pageX/e*2-1,-a.changedTouches[0].pageY/t*2+1);i.setFromCamera(n,b),i.intersectObjects(s).length})),f.domElement.addEventListener("touchmove",(function(){})),window.addEventListener("keydown",O),window.addEventListener("keyup",O);const w=new Se.a(b,f.domElement);w.dampingFactor=.05,w.screenSpacePanning=!0,w.minDistance=3,w.maxDistance=25,w.minPolarAngle=.1,w.maxPolarAngle=Math.PI-.1,w.enableDamping=!0,w.enableZoom=!0,w.enablePan=!0,Ie=w,window.moveCameraToView=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ke(b,w,e,t)},window.g_model_root=Le;let g=null,S=!1;function O(){S&&(S=!1,w.autoRotate=!1,w.autoRotateSpeed=0),g&&clearTimeout(g),g=setTimeout((()=>{S||(S=!0,w.autoRotate=!0,w.autoRotateSpeed=1,j())}),4e3)}w.addEventListener("start",O),w.addEventListener("change",j),O();const x=new be.X;x.onStart=(e,t,a)=>{p(!0)},x.onProgress=(e,t,a)=>{u||p(!0)},x.onLoad=()=>{Ue&&(b.position.set(-2,Te,Te),b.lookAt(0,0,0),function(e,t,a,n){a=a||1.25;const o=new be.f;o.setFromObject(t);const r=new be.fc;o.getCenter(r);const c=new be.fc;o.getSize(c);const i=Math.max(c.x,c.y,c.z);console.log("Max dimension:",i);var s=Math.abs(i/2);console.log("Camera Z position:",s),s*=a,e.position.z=s;const l=o.min.z,d=l<0?-l+s:s-l;if(e.far=3*d,e.updateProjectionMatrix(),n){n.target=r,(!n.maxDistance||n.maxDistance>100)&&(n.maxDistance=Math.min(50,2*d)),n.minPolarAngle=.25*Math.PI,n.maxPolarAngle=.6*Math.PI;const t=n.update;n.update=function(){const a=t.apply(this,arguments);return this.getPolarAngle()<this.minPolarAngle&&(e.position.y=Math.max(e.position.y,r.y)),this.getPolarAngle()>this.maxPolarAngle&&(e.position.y=Math.min(e.position.y,r.y)),a}}else e.lookAt(r)}(b,Le,6,w),w.minDistance=3,window.innerWidth<=768?w.maxDistance=60:w.maxDistance=25,w.update(),Ue=!1),j(),setTimeout((()=>{p(!1)}),1200)};const M=new fe.a(x);We=M;const D=new we.a;D.setDecoderPath("/draco/"),M.setDRACOLoader(D);const _=new be.Xb(x);Be=_;new ve.o(x).load((e=>{let[t,a]=e;n=t,o=a,c=Ee(f,l,b,n,o)})),Ve=new je.a(x),f.render(l,b);const y=()=>{if(j(),window.updateGlobeRotation){const e=w.getAzimuthalAngle(),t=w.getPolarAngle();window.updateGlobeRotation(e,t)}};return w.addEventListener("change",y),window.addEventListener("resize",j),()=>{w.removeEventListener("change",y),window.removeEventListener("resize",j),d.current&&(d.current.innerHTML="")}}),[]),Object(n.useEffect)((()=>{s(null),r.productData&&Ve.setDataType(be.bc).load(r.productData.envMap,(e=>{const t=new ge.a(Ae);t.compileEquirectangularShader();const a=t.fromEquirectangular(e).texture;console.log(a),Re.environment=a,e.dispose(),t.dispose()})),Le.children.forEach((e=>{e.children.forEach((t=>{t.geometry.dispose(),t.material.dispose(),e.remove(t)})),Le.remove(e)})),Le.children=[],r.productData&&(Ue=!0,We.load(r.productData[r.currentDracoVersion],(e=>{if(e.scene){const t=[];e.scene.traverse((e=>{"Mesh"===e.type&&(e.castShadow=!0,t.push(e))})),r.productData.nodes.forEach((e=>{const a=new be.rb;a.name=e.id,e.candidateMeshes.forEach((n=>{const o=t.find((e=>e.name===n.id));o&&(o.visible=o.name===e.defaultMesh,a.add(o))})),Le.add(a)}));const a=[];r.productData.nodes.forEach((e=>{a.push({nodeId:e.id,meshId:e.defaultMesh})})),c(a),Le.children.forEach((e=>{var t;const a=new be.ib({color:"#363636"});a.envMap=Re.environment,e.material=a;const n=null===(t=r.productData.nodes.find((t=>t.id===e.name)))||void 0===t?void 0:t.defaultMaterial;(async function(e){const t=await fetch(e);return await t.json()})(null===n||void 0===n?void 0:n.path).then((t=>{v(e,t)}))}))}}))),Fe()}),[r.productData,r.currentDracoVersion]),Object(n.useEffect)((()=>{var e;Ge&&(Ge=null,i(null)),null===(e=Le)||void 0===e||e.traverse((e=>{var t;"Object3D"===e.type&&e.name===(null===(t=o.currentNodeData)||void 0===t?void 0:t.id)&&(Ge=e,i(e.material.name))})),Fe()}),[o.currentNodeData]),Object(n.useEffect)((()=>{if(Ge&&a.selectedMeshData){const e=a.selectedMeshData.find((e=>e.nodeId===Ge.name));e&&Ge.children.forEach((t=>{t.visible=t.name===e.meshId}))}Fe()}),[a.selectedMeshData]),Object(n.useEffect)((()=>{v(Ge,t.currentMaterialData)}),[t.currentMaterialData]),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(he.a,{if:u,children:Object(Z.jsx)(Me,{})}),Object(Z.jsx)("div",{className:_e.a.canvasContainer,ref:d})]})})),He=qe,Xe=a(24),Ke=a.n(Xe);var Ye,Je,Ze=()=>{const e=Object(n.useRef)(null),[t,a]=Object(n.useState)(!1),o=Object(n.useRef)(null);Object(n.useEffect)((()=>(window.updateGlobeRotation=(a,n)=>{if(e.current&&!t){const t=180*a/Math.PI%360;e.current.style.transform="rotateY(".concat(t,"deg)")}},()=>{delete window.updateGlobeRotation,o.current&&cancelAnimationFrame(o.current)})),[t]);return Object(Z.jsxs)("div",{className:Ke.a.globeContainer,onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:[Object(Z.jsxs)("div",{className:Ke.a.loading,ref:e,children:[Object(Z.jsx)("div",{className:"".concat(Ke.a.llOvals," ").concat(Ke.a.oval1)}),Object(Z.jsx)("div",{className:"".concat(Ke.a.llOvals," ").concat(Ke.a.oval2)}),Object(Z.jsx)("div",{className:"".concat(Ke.a.llOvals," ").concat(Ke.a.oval3)})]}),Object(Z.jsx)("div",{className:"".concat(Ke.a.llOvals," ").concat(Ke.a.ovalHorizontal)}),Object(Z.jsx)("div",{className:Ke.a.text360,children:"360\xb0"})]})};var Qe=Object(i.b)((e=>({nodeStore:e.nodeStore})))((function(e){let{nodeStore:t,onModelRotate:a}=e;const[n,r]=o.a.useState(!1),[c,i]=o.a.useState(!0),[s,l]=o.a.useState({});return o.a.useEffect((()=>{i(!0)}),[t.currentNodeData]),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)($e,{children:Object(Z.jsxs)("div",{style:{opacity:0,pointerEvents:"none"},children:[Object(Z.jsx)(pe,{}),Object(Z.jsx)(ce,{})]})}),Object(Z.jsxs)(et,{children:[c&&Object(Z.jsx)(ee,{onMaterialSelect:e=>{i(!1),t.currentNodeData&&e&&l((a=>Object(f.a)(Object(f.a)({},a),{},{[t.currentNodeData.id]:e.thumbnail})))}}),Object(Z.jsx)(de,{onNodeReselect:()=>i(!0),getMaterialThumbnailByNode:e=>{var t;return s[e.id]||(null===(t=e.candidateMaterials[0])||void 0===t?void 0:t.thumbnail)},onNodeVisibilityChange:(e,t)=>{window.setNodeVisibility&&window.setNodeVisibility(e,t)}})]}),Object(Z.jsx)(He,{isNight:n,selectedNode:t.currentNodeData,onModelRotate:a}),Object(Z.jsx)(Ze,{})]})}));const $e=Object(V.a)(B.a)(Ye||(Ye=Object(W.a)(["\n  padding: 0.5em;\n  position: absolute;\n  top: 1em;\n  left: 1em;\n  z-index: 1;\n  width: min-content;\n  background: transparent !important;\n  box-shadow: none !important;\n  border: none !important;\n"]))),et=V.a.div(Je||(Je=Object(W.a)(["\n  padding: 0.5em;\n  position: absolute;\n  bottom: 1em;\n  left: 1em;\n  z-index: 1;\n  background: transparent !important;\n  box-shadow: none !important;\n  border: none !important;\n"])));var tt=()=>Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)(i.a,{store:F,children:[" ",Object(Z.jsxs)(d.a,{loading:null,persistor:G,children:[" ",Object(Z.jsxs)(u.a,{theme:m,children:[" ",Object(Z.jsx)(l.a,{basename:"/3d-viewer",children:Object(Z.jsxs)(s.c,{children:[Object(Z.jsx)(s.a,{exact:!0,path:"/",component:Qe})," "]})})]})]})]})});a(142);c.a.render(Object(Z.jsx)(o.a.StrictMode,{children:Object(Z.jsx)(tt,{})}),document.getElementById("root-app"))},24:function(e,t,a){e.exports={globeContainer:"Globe360_globeContainer__29GfB",loading:"Globe360_loading__KpIZm",llOvals:"Globe360_llOvals__4XcvT",oval1:"Globe360_oval1__2N2Ix",oval2:"Globe360_oval2__1MNlJ",oval3:"Globe360_oval3__jcqGL",ovalHorizontal:"Globe360_ovalHorizontal__22PKD",text360:"Globe360_text360__1onXX"}},56:function(e,t,a){e.exports={loader:"Loader_loader__31j4R",spinner:"Loader_spinner__2W_GQ",rotate:"Loader_rotate__1UymK",path:"Loader_path__BSccI",dash:"Loader_dash__3aHXg"}},89:function(e,t,a){e.exports={canvasContainer:"Viewer3D_canvasContainer__3lkz4"}}},[[143,1,2]]]);